(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["viewer"],{e1b1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"a-cover flex"},[a("Transition",{attrs:{name:"fade"}},[t.mediaOpen?t._e():a("Header",{staticClass:"z-20"})],1),a("Transition",{attrs:{name:"fade"}},[t.mediaOpen||t.isGuided?t._e():a("Menu",{staticClass:"z-10",attrs:{menuitems:t.categories,category:t.category,arialabel:"Areas of interest"}})],1),a("Transition",{attrs:{name:"fade"}},[t.isGuided&&!t.mediaOpen?a("TourStops",{staticClass:"z-10",attrs:{guidedtour:t.guidedtour,"is-guided-intro":t.isGuidedIntro}}):t._e()],1),a("Transition",{attrs:{name:"fade"}},[a("KeepAlive",[t.isCampus&&t.category&&!t.isExploreAll&&!t.mediaOpen?a("Categories",{staticClass:"y-inset left-0 w-85vw md:w-45vw lg:w-40vw xl:w-44vw lg:max-w-2xl z-1",attrs:{category:t.category}}):!t.isPanorama||t.mediaOpen||t.isGuidedIntro?t._e():a("Sidebar",{staticClass:"y-inset left-0 w-85vw md:w-96 z-1",attrs:{post:t.panorama,location:t.location,"is-guided":t.isGuided,category:t.category},on:{hotSpotClick:t.handleNavigation}})],1)],1),a("Map",{staticClass:"z-0 transition",class:[t.isCampus?"visible opacity-100":"invisible opacity-0"],attrs:{"aria-hidden":t.mediaOpen,category:t.category,categories:t.categories,"is-explore-all":t.isExploreAll,"is-campus-intro":t.isCampusIntro,"media-open":t.mediaOpen}}),a("Panorama",{directives:[{name:"show",rawName:"v-show",value:t.isPanorama,expression:"isPanorama"}],key:"panorama",staticClass:"z-0",attrs:{"aria-hidden":t.mediaOpen,post:t.panorama,location:t.location,category:t.category},on:{hotSpotClick:t.handleNavigation}}),a("Transition",{attrs:{name:"fade"}},[t.isGuidedIntro||t.isCampusIntro?a("InstructionOverlay",{staticClass:"z-1",attrs:{"is-guided-intro":t.isGuidedIntro,"is-campus-intro":t.isCampusIntro}}):t._e()],1),a("Transition",{attrs:{name:"fade"}},[t.mediaOpen?a("FocusLock",[a("RouterView",{staticClass:"z-1",attrs:{name:"media",location:t.location}})],1):t._e()],1)],1)},s=[],n=(a("2532"),a("5530")),o=a("2f62"),r=a("1b62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header absolute top-0 right-0 flex items-center justify-between"},[a("div",{staticClass:"flex-a"},[t.mobile?t._e():a("ul",{staticClass:"flex"},t._l(t.ctas,(function(t,e){return a("li",{key:t.href+"-"+e},[a("Button",{staticClass:"btn-sm btn-secondary mr-2",attrs:{type:"external",text:t.call_to_action,textsize:"lg",path:t.href,icon:"LinkIcon",iconright:!0,iconsize:"1rem"}})],1)})),0),a("Navigation")],1)])},c=[],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"relative",attrs:{id:"navigation","aria-label":"Main"}},[a("button",{staticClass:"relative flex-c focus-a z-1",attrs:{"aria-label":t.isOpen?"Close":"Open","aria-controls":"main-navigation","aria-expanded":t.isOpen,"data-gtm-hamburger-menu":""},on:{click:t.handleClick,focus:function(e){return t.handleFocus(e)}}},[a("IconBase",{attrs:{icon:t.isOpen?"CloseIcon":"BurgerIcon",color:"primary",size:t.mobile?"2rem":"2.2rem"}})],1),a("Transition",{attrs:{name:"slide-left"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"f-cover h-full bg-black-85",attrs:{id:"main-navigation"}},[a("div",{staticClass:"h-full bg-white md:absolute md:y-inset md:right-0 md:w-144 md:bg-primary overflow-y-auto"},[a("div",{staticClass:"w-full bg-full shadow-2xl",style:"background-image: url("+t.image.src+")"},[a("div",{staticClass:"md:w-96 md:pt-24"},[a("div",{staticClass:"pt-12 pb-8 bg-white",on:{click:t.handleClick}},[a("ul",{attrs:{"aria-label":"Site navigation"}},[a("li",[a("Button",{staticClass:"btn-lg btn-primary mb-2 md:mb-4 mx-auto",attrs:{icon:"ArrowIcon",text:"Home",path:{name:"home"}}})],1),a("li",{},[a("Button",{staticClass:"btn-lg btn-primary mb-2 md:mb-4 mx-auto",attrs:{icon:"ArrowIcon",text:"Explore for yourself",path:{name:"campus"}}})],1),a("li",[a("Button",{staticClass:"btn-lg btn-primary mb-2 md:mb-4 mx-auto",attrs:{icon:"ArrowIcon",text:"Take a guided tour",path:t.guidedTourPath}})],1)]),a("div",{staticClass:"flex-j"},[a("ul",{staticClass:"inline-block mt-2 mb-4",attrs:{"aria-label":"Social media links"}},t._l(t.options.social_media,(function(e,i){return a("li",{directives:[{name:"show",rawName:"v-show",value:e,expression:"item"}],key:i,staticClass:"inline-block mx-2"},[a("Button",{attrs:{type:"external",aria:i,path:e,icon:i+"icon",iconsize:"1.1rem"},nativeOn:{focus:function(e){return t.handleFocus(e)}}})],1)})),0)]),a("ul",{staticClass:"text-center",attrs:{"aria-label":"External links"}},[a("li",[t.phone?a("Button",{staticClass:"btn-lg bg-primary text-white mx-auto mb-2",attrs:{type:"button",icon:"ArrowIcon",text:"Live Events"},nativeOn:{click:function(e){return t.$store.commit("toggleLiveEventsState")}}}):t._e()],1),t._l(t.ctas,(function(t,e){return a("li",{key:t.href+"-"+e},[a("Button",{staticClass:"btn-lg btn-secondary mx-auto mb-2",attrs:{type:"external",icon:"LinkIcon",iconsize:"1rem",text:t.call_to_action,textsize:"lg",path:t.href}})],1)})),a("li",{staticClass:"mt-6 mb-6"},[a("a",{staticClass:"block text-lg underline",attrs:{href:"options.accessibilty_statement",target:"blank"},domProps:{innerHTML:t._s("Accessibility statement")}})]),a("li",[a("p",[t._v(" Created by "),a("a",{staticClass:"underline",attrs:{href:"https://revolutionviewing.co.uk",target:"blank"},domProps:{innerHTML:t._s("RV")},on:{focus:function(e){return t.handleFocus(e)}}})])])],2)])])])])])])],1)},d=[],m=(a("ddb0"),a("0de6")),p=a("63b6"),h={name:"Navigation",components:{IconBase:m["a"],Button:p["a"]},data(){return{isOpen:!1}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["touch","mobile","phone"])),Object(o["b"])(["options","categories","guidedtour"])),{},{image(){var t,e,a,i,s;return this.phone?"":{src:null===(t=this.options)||void 0===t||null===(e=t.nav_image)||void 0===e||null===(a=e.sizes)||void 0===a?void 0:a.large,alt:null===(i=this.options)||void 0===i||null===(s=i.nav_image)||void 0===s?void 0:s.alt}},guidedTourPath(){var t;const e=null===(t=this.guidedtour)||void 0===t?void 0:t.children[0];return e?{name:"guided-tour"}:{name:"home"}},ctas(){return this.options.calls_to_action.filter(t=>t.href&&t.call_to_action)}}),methods:{handleClick(){this.isOpen=!this.isOpen,this.$store.commit("toggleNavState")},handleFocus(){const t=document.getElementById("navigation"),e=[...t.querySelectorAll("button, a")],a=e[0],i=e[e.length-1];event.target.addEventListener("keydown",t=>{const e="Tab"===t.code;e&&(t.shiftKey?document.activeElement===a&&this.isOpen&&(i.focus(),t.preventDefault()):document.activeElement===i&&(a.focus(),t.preventDefault()))})}}},g=h,b=a("2877"),v=Object(b["a"])(g,u,d,!1,null,null,null),f=v.exports,y={name:"Header",components:{Button:p["a"],Navigation:f},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["touch","mobile","isIframe"])),Object(o["b"])(["options"])),{},{ctas(){return this.options.calls_to_action.filter(t=>t.href&&t.call_to_action)}})},C=y,x=Object(b["a"])(C,l,c,!1,null,null,null),w=x.exports,O=a("5df7"),_=a.n(O);const k=()=>a.e("chunk-78f68360").then(a.bind(null,"5ea5")),I=()=>a.e("chunk-0e2486a1").then(a.bind(null,"1d9f")),j=()=>a.e("chunk-5e5d77e6").then(a.bind(null,"2493")),z=()=>a.e("chunk-d8a72c74").then(a.bind(null,"f2d4")),B=()=>a.e("chunk-5e65e8b3").then(a.bind(null,"a0be")),E=()=>a.e("chunk-0e73541e").then(a.bind(null,"fb62")),P=()=>a.e("chunk-2d208302").then(a.bind(null,"a470"));var S={name:"Viewer",components:{FocusLock:_.a,Panorama:z,Header:w,Sidebar:k,Categories:I,Menu:E,Map:B,TourStops:j,InstructionOverlay:P},mixins:[r["d"]],computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["touch","mobile","mediaOpen","sidebarOpen"])),Object(o["b"])(["categories","getPostBySlug","guidedtour"])),{},{category(){return this.getPostBySlug(this.$route.params.category_id)},location(){const t=this.getPostBySlug(this.$route.params.media_id);if("location"!==(null===t||void 0===t?void 0:t.type)||this.isExploreAll)return this.isGuided?this.guidedtour:t;{const e=t.children.filter(t=>t.parents.includes(this.category.id)||!t.parents),a=Object.assign({},t,{children:e});return a}},panorama(){return this.isGuidedIntro?this.guidedtour.children[0]:this.getPostBySlug(this.$route.params.panorama_id)},isCampus(){return this.$route.meta.campus},isGuided(){return this.$route.meta.guided},isExploreAll(){var t;return"explore-all"===(null===this||void 0===this||null===(t=this.category)||void 0===t?void 0:t.slug)},isPanorama(){return this.$route.meta.panorama},isCampusIntro(){return"campus"===this.$route.name},isGuidedIntro(){return"guided-tour"===this.$route.name}}),methods:{handleNavigation(t){this.isGuided?this.$router.push({name:"guided-hotspot",params:{panorama_id:this.panorama.slug,hotspot_id:t}}).catch(()=>{}):this.isPanorama&&this.$router.push({name:"campus-hotspot",params:{category_id:this.category.slug,panorama_id:this.panorama.slug,hotspot_id:t}}).catch(()=>{})}}},T=S,$=Object(b["a"])(T,i,s,!1,null,null,null);e["default"]=$.exports}}]);
//# sourceMappingURL=viewer.977f4766.js.map