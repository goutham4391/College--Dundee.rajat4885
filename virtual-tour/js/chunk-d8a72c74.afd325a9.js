(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8a72c74"],{2873:function(t,e,o){t.exports=o.p+"img/icon-hs-article.138043a7.svg"},"4c8b":function(t,e,o){t.exports=o.p+"img/icon-hs-gallery.2256d484.svg"},"5dfb":function(t,e,o){var n={"./icon-hs-article.svg":"2873","./icon-hs-audio.svg":"c775","./icon-hs-gallery.svg":"4c8b","./icon-hs-video.svg":"a965"};function s(t){var e=i(t);return o(e)}function i(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id="5dfb"},a965:function(t,e,o){t.exports=o.p+"img/icon-hs-video.82d464d1.svg"},c775:function(t,e,o){t.exports=o.p+"img/icon-hs-audio.43a27b5b.svg"},e01a:function(t,e,o){"use strict";var n=o("23e7"),s=o("83ab"),i=o("da84"),a=o("5135"),r=o("861d"),l=o("9bf2").f,p=o("e893"),c=i.Symbol;if(s&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var h={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new c(t):void 0===t?c():c(t);return""===t&&(h[e]=!0),e};p(d,c);var u=d.prototype=c.prototype;u.constructor=d;var v=u.toString,f="Symbol(test)"==String(c("test")),m=/^Symbol\((.*)\)[^)]+$/;l(u,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=v.call(t);if(a(h,t))return"";var o=f?e.slice(7,-1):e.replace(m,"$1");return""===o?void 0:o}}),n({global:!0,forced:!0},{Symbol:d})}},f2d4:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"a-cover",attrs:{"aria-label":"Panorama viewer"}},[o("div",{staticClass:"h-full z-0",attrs:{id:"pano"}})])}],i=(o("e01a"),o("5530")),a=o("2f62"),r=o("56d7"),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"text-white"},[o("button",{staticClass:"p-1",attrs:{"aria-label":"Toggle gyroscope"},on:{click:function(e){return t.$emit("toggleGyro")}}},[o("svg",{class:"h-5 w-8 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32","svg-inline":"","aria-hidden":"true",role:"presentation",focusable:"false",tabindex:"-1"}},[o("path",{attrs:{d:"M32 16c0 8.836-7.163 16-16 16S0 24.837 0 16C0 7.164 7.163.001 15.999 0h.004C24.838 0 32 7.162 32 15.997V16zM19.316 7.277l-6.619 6.31a1.605 1.605 0 00-.436.744l-.002.011-2.155 8.89a1.549 1.549 0 002.574 1.483l-.001.001 6.619-6.31c.207-.201.36-.457.436-.744l.003-.011 2.155-8.889a1.556 1.556 0 00-2.576-1.484l.001-.001zM16 13.935A2.065 2.065 0 1018.065 16v-.001a2.063 2.063 0 00-2.063-2.063H16z"}})])]),o("button",{staticClass:"p-1",attrs:{"aria-label":"Enter vr mode"},on:{click:function(e){return t.$emit("enterVr")}}},[o("svg",{class:"h-5 w-8 fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"55",height:"32",viewBox:"0 0 55 32","svg-inline":"","aria-hidden":"true",role:"presentation",focusable:"false",tabindex:"-1"}},[o("path",{attrs:{d:"M50.879 0H3.937A3.937 3.937 0 000 3.937v.01-.001 24.116a3.937 3.937 0 003.937 3.937H18.24l.081.001a2.812 2.812 0 002.579-1.69l.007-.018 3.203-8a3.508 3.508 0 013.177-2.028c1.439 0 2.675.868 3.214 2.109l.009.023 2.774 7.786a2.913 2.913 0 002.666 1.814h14.833a3.937 3.937 0 003.937-3.937V4.052a3.75 3.75 0 00-3.739-4.054l-.106.001h.005zM15.68 22.933h-.003A6.077 6.077 0 019.6 16.856v-.003l-.001-.079a6.08 6.08 0 1112.16 0l-.001.083v-.004.003a6.077 6.077 0 01-6.077 6.077h-.002zm23.467 0h-.002a6.077 6.077 0 01-6.077-6.077v-.003l-.001-.079a6.08 6.08 0 1112.16 0l-.001.083v-.004.003a6.077 6.077 0 01-6.077 6.077h-.003z"}})])])])},p=[],c=o("2877"),h={},d=Object(c["a"])(h,l,p,!1,null,null,null),u=d.exports,v={name:"Panorama",components:{webVrGyroBtns:u},props:{post:{type:Object,default:()=>{}},location:{type:Object,default:()=>{}},category:{type:Object,default:()=>{}}},data(){return{pano:"",hotspots:[]}},computed:Object(i["a"])(Object(i["a"])({},Object(a["c"])(["mobile","touch","sidebarOpen"])),Object(a["b"])([])),watch:{post:{immediate:!0,handler(t){t&&this.$nextTick(()=>{this.krpTour()})}}},mounted(){embedpano({xml:"vendor/krpano.xml",target:"pano",id:"rama",mobilescale:1,wmode:"transparent",onready:this.krpReady}),r["bus"].$on("panToHotSpot",this.showFromSidebar),r["bus"].$on("closeHotSpot",this.hideFromSidebar),document.getElementById("rama").addEventListener("focus",()=>{this.$announcer.set(this.post.panorama.description)})},beforeDestroy(){removepano("rama"),this.pano=!1,document.removeEventListener("focus",()=>{})},methods:{krpReady(t){this.pano=t,this.pano.setAttribute("tabindex",0),window.activekrpanowindow="rama",window.onSpotLoaded=this.onSpotLoaded,window.onSpotClick=this.onSpotClick},krpTour(){const t=`\n        <krpano>\n          <view\n            fov="80.0"\n            fovmin="65"\n            fovmax="105"\n            limitview="lookat"\n            hlookat="${this.post.position.horizontal}"\n            vlookat="${this.post.position.vertical}"\n            hlookatmin="${this.post.corners.west}"\n            hlookatmax="${this.post.corners.east}"\n            vlookatmin="-90"\n            vlookatmax="90"\n            fisheye="0"/>\n          <preview url="${this.post.panorama.sizes.medium}?nocache=${Date.now()}"/>\n          <image>\n            <sphere url="${this.post.panorama.url}"/>\n          </image>\n        </krpano>\n      `,e=`loadxml(${t}, null, MERGE, blend(1, linear)); }`;this.pano.call(e),this.krpAddSpots()},krpAddSpots(){const t=this.post.children.reduce((t,e)=>{const n=""+e.slug,s=`\n          <button role="link" aria-label="${e.title}" class="hotspot group relative h-14 text-base rounded-full focus-a font-sans">\n            <div class="popup absolute left-0 top-0 h-full pl-16 pr-4 bg-white rounded-full opacity-0 transition">\n              <div class="h-full flex-c">\n                <span class="block mr-1"> ${e.title} </span>\n              </div>\n            </div>\n\n            <div class="relative flex-c h-14 w-14 rounded-full">\n              <img src="${o("5dfb")(`./icon-hs-${e.type}.svg`)}" alt="" role="presentation" class="relative h-full w-full" />\n            </div>\n          </button>\n        `;return`\n          ${t}\n          addhotspot(${n});\n          set(hotspot[${n}].ath, ${e.horizontal});\n          set(hotspot[${n}].atv, ${e.vertical});\n          set(hotspot[${n}].type, text);\n          set(hotspot[${n}].html, '${escape(s)}');\n          set(hotspot[${n}].padding, 0);\n          set(hotspot[${n}].wordwrap, false);\n          set(hotspot[${n}].interactivecontent, true);\n          set(hotspot[${n}].zoom, false);\n          set(hotspot[${n}].bg, false);\n          set(hotspot[${n}].renderer, css3d);\n          set(hotspot[${n}].onclick, looktohotspot(${n}, 50); js(onSpotClick(${n})));\n          set(hotspot[${n}].onloaded, js(onSpotLoaded(${n})));\n\n        `},""),e=""+t;this.pano.call(e)},getSprite(t){return this.pano.get(`hotspot[${t}].sprite`)},onSpotClick(t){this.$emit("hotSpotClick",t)},panToHotSpot(t){this.pano.call(`looktohotspot(${t}, 50);`)},showHotSpotPopup(t){const e=t.querySelector(".popup");t.style.zIndex=2002,e.classList.add("opacity-100","pointer-events-auto")},hideHotSpotPopup(t){const e=t.querySelector(".popup");t.style.zIndex=2001,e.classList.remove("opacity-100","pointer-events-auto")},onSpotLoaded(t){const e=this.getSprite(t);setTimeout(()=>{const o=e.querySelector(".hotspot");let n=!1;try{o.addEventListener("mousedown",()=>{n=!0}),o.addEventListener("mouseup",()=>{n=!1}),o.addEventListener("mouseover",()=>{this.touch||this.showHotSpotPopup(e)}),o.addEventListener("mouseleave",()=>{this.hideHotSpotPopup(e)}),o.addEventListener("focus",o=>{n||(this.showHotSpotPopup(e),this.panToHotSpot(t)),o.target.addEventListener("keyup",()=>{const o=event.key||event.keyCode;"Enter"!==o&&"13"!==o||this.onSpotClick(t),"Escape"!==o&&"27"!==o||(this.hideHotSpotPopup(e),document.getElementById("rama").focus())})}),o.addEventListener("blur",t=>{this.hideHotSpotPopup(e),t.target.removeEventListener("keyup",()=>{})})}catch(s){console.log()}},10)},showFromSidebar(t){const e=this.getSprite(t);this.touch||this.showHotSpotPopup(e),this.panToHotSpot(t)},hideFromSidebar(t){const e=this.getSprite(t);this.touch||this.hideHotSpotPopup(e)},toggleGyro(){this.pano.call("switch(plugin[gyro].enabled)")},enterVr(){this.pano.call("webvr.toggleVR()")},rvonentervr(){this.pano.call("set(events[vr_events].onviewchange, followMenuAction()); set(hotspot[followMenuPrev].visible, true); set(hotspot[followMenuNext].visible, true);")},rvonexitvr(){this.pano.call("set(events[vr_events].onviewchange, null); set(hotspot[followMenuPrev].visible, false); set(hotspot[followMenuNext].visible, false)")},rvvrnext(){},rvvrprevious(){}}},f=v,m=Object(c["a"])(f,n,s,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-d8a72c74.afd325a9.js.map